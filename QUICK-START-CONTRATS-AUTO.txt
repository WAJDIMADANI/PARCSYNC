â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     SYSTÃˆME AUTOMATIQUE DE NOTIFICATIONS POUR CONTRATS           â•‘
â•‘                    GUIDE RAPIDE (5 MINUTES)                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸŽ¯ OBJECTIF
-----------
Quand vous crÃ©ez un contrat (Yousign, manuel, ou import masse),
le systÃ¨me crÃ©e AUTOMATIQUEMENT une notification ou un incident
pour suivre la date d'expiration.


ðŸ“‹ INSTALLATION (3 FICHIERS SQL Ã€ EXÃ‰CUTER)
--------------------------------------------

Ouvrir Supabase â†’ SQL Editor

1ï¸âƒ£ FICHIER: update-notification-incident-types.sql
   â†’ Copier/coller â†’ Run
   âœ… Message attendu: "Migration terminÃ©e avec succÃ¨s!"

2ï¸âƒ£ FICHIER: create-auto-notification-for-contracts.sql
   â†’ Copier/coller â†’ Run
   âœ… Message attendu: "Fonction crÃ©Ã©e avec succÃ¨s!"

3ï¸âƒ£ FICHIER: create-trigger-auto-notification-contrat.sql
   â†’ Copier/coller â†’ Run
   âœ… Message attendu: "Trigger automatique activÃ© avec succÃ¨s!"


ðŸ§ª TEST IMMÃ‰DIAT
-----------------

Pour un employÃ© avec contrat expirÃ© (comme Djeneba DEMBELE):

1. Cliquer sur l'employÃ©
2. Bouton "Ajouter un contrat"
3. Remplir:
   - Type: CDD
   - Date dÃ©but: aujourd'hui
   - Date fin: dans 60 jours
   - Uploader un PDF
4. Valider

5. Aller dans "Notifications"
   â†’ Vous devriez voir une nouvelle notification automatique!


âœ… FONCTIONNEMENT
------------------

Contrat expire dans > 30 jours  â†’  NOTIFICATION crÃ©Ã©e
Contrat expire dans < 30 jours  â†’  INCIDENT crÃ©Ã© (prioritÃ© haute)
Contrat dÃ©jÃ  expirÃ©             â†’  INCIDENT crÃ©Ã© (prioritÃ© haute)


ðŸ” VÃ‰RIFICATION
----------------

Le systÃ¨me empÃªche les doublons automatiquement.
Si vous voyez "Notification existante trouvÃ©e" dans les logs,
c'est NORMAL - le systÃ¨me fonctionne correctement!


ðŸ“š DOCUMENTATION COMPLÃˆTE
--------------------------

Voir: INSTALLATION-CONTRATS-AUTO.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Temps d'installation: 5 minutes
Gain de temps: PERMANENT - Plus besoin de crÃ©er les notifications manuellement!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
