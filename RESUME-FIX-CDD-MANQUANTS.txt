========================================
FIX CARTE INCIDENTS - CDD MANQUANTS
========================================

PROBL√àME
--------
Carte "Incidents" affiche 56 au lieu de ~196
Les CDD expir√©s (140) ne sont PAS compt√©s.

CAUSE
-----
Mauvaise RPC utilis√©e :
‚úó get_contrats_expires() (n'existe pas ou retourne rien)
‚úì get_cdd_expires_for_incidents() (la bonne)

SOLUTION
--------
Corriger la RPC ligne 448 :

Avant :
const { data: cddData } = await supabase.rpc('get_contrats_expires');

Apr√®s :
const { data: cddData, error: cddError } = await supabase.rpc('get_cdd_expires_for_incidents');

+ Gestion d'erreur CDD (lignes 450-452)
+ Gestion d'erreur avenants (lignes 459-461)
+ Logs de debug (lignes 468-474)

R√âSULTAT
--------
Avant : 56 incidents (CDD = 0 ‚ùå)
Apr√®s : ~196 incidents (CDD = 140 ‚úÖ)

La carte additionne maintenant TOUS les incidents :
- Titre de s√©jour : 13
- Visite m√©dicale : 17
- Permis de conduire : 1
- CDD : 140 ‚úÖ (maintenant compt√©s)
- Avenant : 25
Total : 196

FICHIER MODIFI√â
---------------
‚úì src/components/RHDashboard.tsx
  - Ligne 448 : RPC CDD corrig√©e
  - Lignes 450-452 : Gestion erreur CDD
  - Lignes 459-461 : Gestion erreur avenants
  - Lignes 468-474 : Logs de debug

TEST RAPIDE
-----------
1. Rafra√Æchir Dashboard RH (Ctrl+Shift+R)
2. V√©rifier carte Incidents : doit afficher ~196
3. Ouvrir console (F12) : chercher log "üìä Dashboard RH - Incidents"
   Doit afficher : cddCount: 140 (pas 0)
4. Comparer avec page Incidents : les totaux doivent correspondre

BUILD
-----
‚úì R√©ussi sans erreurs

DOCUMENTATION
-------------
- FIX-DASHBOARD-RH-CDD-MANQUANTS.md : Guide complet
- Ce fichier : R√©sum√© rapide
- CORRECTIONS-APPLIQUEES.txt : Mis √† jour (section 6)
