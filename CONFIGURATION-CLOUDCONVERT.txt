â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CONFIGURATION CLOUDCONVERT - INSTRUCTIONS COMPLÃˆTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ OBJECTIF
-----------
Configurer CloudConvert pour convertir automatiquement les
courriers Word (.docx) en PDF.


ğŸ“ Ã‰TAPE 1 : CRÃ‰ER UN COMPTE CLOUDCONVERT
------------------------------------------
1. Aller sur https://cloudconvert.com/
2. Cliquer sur "Sign Up"
3. CrÃ©er un compte avec votre email professionnel
4. Confirmer l'email


ğŸ”‘ Ã‰TAPE 2 : OBTENIR L'API KEY
-------------------------------
1. Se connecter sur https://cloudconvert.com/dashboard
2. Aller dans "API" > "API Keys"
   URL directe : https://cloudconvert.com/dashboard/api/v2/keys
3. Cliquer sur "Create New API Key"
4. Nom suggÃ©rÃ© : "ParcSync Production"
5. COPIER LA CLÃ‰ (commence par "eyJ...")
   âš ï¸ IMPORTANT : La clÃ© ne sera affichÃ©e qu'une seule fois !


ğŸ’° Ã‰TAPE 3 : CHOISIR UN PLAN (OPTIONNEL)
-----------------------------------------
Plan Gratuit (par dÃ©faut) :
  â€¢ 25 conversions par jour
  â€¢ Parfait pour tester
  â€¢ $0

Plan Starter (recommandÃ©) :
  â€¢ 500 conversions par jour
  â€¢ ~16 conversions par jour de travail
  â€¢ $9 par mois
  â€¢ Lien : https://cloudconvert.com/pricing

Plan Pro :
  â€¢ 5000 conversions par jour
  â€¢ Pour usage intensif
  â€¢ $39 par mois


ğŸ”§ Ã‰TAPE 4 : CONFIGURER DANS SUPABASE
--------------------------------------

MÃ‰THODE A : Via le Dashboard Supabase (RecommandÃ©)
---------------------------------------------------
1. Aller sur https://supabase.com/dashboard
2. SÃ©lectionner votre projet ParcSync
3. Menu latÃ©ral : "Project Settings" (âš™ï¸)
4. Onglet : "Edge Functions"
5. Section : "Secrets"
6. Cliquer sur "Add new secret"
7. Remplir :
   â€¢ Name : CLOUDCONVERT_API_KEY
   â€¢ Value : [Coller votre clÃ© API CloudConvert]
8. Cliquer sur "Add secret"
9. âœ… Configuration terminÃ©e !


MÃ‰THODE B : Via Supabase CLI
-----------------------------
Si vous avez installÃ© Supabase CLI :

1. Ouvrir un terminal
2. Naviguer vers le dossier du projet
3. ExÃ©cuter :

   supabase secrets set CLOUDCONVERT_API_KEY=eyJ...votre-clÃ©...

4. VÃ©rifier :

   supabase secrets list

5. âœ… Vous devriez voir CLOUDCONVERT_API_KEY dans la liste


ğŸ“¤ Ã‰TAPE 5 : DÃ‰PLOYER LA FONCTION EDGE
---------------------------------------

MÃ‰THODE A : Via le script fourni
---------------------------------
1. Ouvrir un terminal dans le dossier du projet
2. ExÃ©cuter :

   ./deploy-convert-pdf.sh

3. RÃ©pondre "o" quand demandÃ©
4. âœ… La fonction sera dÃ©ployÃ©e automatiquement


MÃ‰THODE B : Commande manuelle
------------------------------
   supabase functions deploy convert-courrier-to-pdf


ğŸ§ª Ã‰TAPE 6 : TESTER
--------------------
1. Aller sur parcsync.madimpact.fr
2. Se connecter
3. Menu : Courriers administratifs
4. Trouver un courrier avec uniquement un fichier Word
5. Cliquer sur le bouton ğŸ” "GÃ©nÃ©rer PDF"
6. Attendre 2-5 secondes
7. Toast de succÃ¨s : "PDF gÃ©nÃ©rÃ© avec succÃ¨s!"
8. TÃ©lÃ©charger le PDF et l'ouvrir
9. âœ… Le PDF doit s'ouvrir correctement


ğŸ” VÃ‰RIFICATION
---------------

VÃ©rifier que la variable est configurÃ©e :
-----------------------------------------
Dashboard Supabase > Edge Functions > Secrets
Vous devez voir : CLOUDCONVERT_API_KEY = â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢


VÃ©rifier les logs aprÃ¨s test :
-------------------------------
Dashboard Supabase > Edge Functions > Logs
Rechercher : "Conversion du courrier"
RÃ©sultat attendu :
  Conversion du courrier <id>, DOCX: <url>
  DOCX tÃ©lÃ©chargÃ©, taille: XXX octets
  CloudConvert job crÃ©Ã©: <job-id>
  PDF gÃ©nÃ©rÃ© avec succÃ¨s


VÃ©rifier le quota CloudConvert :
---------------------------------
Dashboard CloudConvert > Usage
  â€¢ Conversions utilisÃ©es aujourd'hui
  â€¢ Conversions restantes


âš ï¸ DÃ‰PANNAGE
------------

Erreur "CLOUDCONVERT_API_KEY non configurÃ©e"
---------------------------------------------
â†’ La variable d'environnement n'est pas configurÃ©e
â†’ Reprendre l'Ã©tape 4


Erreur "CloudConvert job creation failed"
------------------------------------------
â†’ ClÃ© API invalide ou quota dÃ©passÃ©
â†’ VÃ©rifier la clÃ© API sur le dashboard CloudConvert
â†’ VÃ©rifier le quota : https://cloudconvert.com/dashboard/usage


Conversion qui ne termine jamais
----------------------------------
â†’ Fichier trop lourd (> 5 MB)
â†’ ProblÃ¨me rÃ©seau avec CloudConvert
â†’ VÃ©rifier les logs : Dashboard CloudConvert > Jobs


Le PDF gÃ©nÃ©rÃ© est corrompu
---------------------------
â†’ Le fichier Word source est corrompu
â†’ TÃ©lÃ©charger et ouvrir le Word pour vÃ©rifier
â†’ VÃ©rifier les logs de l'Edge Function


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  RÃ‰CAPITULATIF
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Compte CloudConvert crÃ©Ã©
âœ… API Key obtenue (commence par eyJ...)
âœ… Plan choisi (Gratuit ou Starter)
âœ… Variable CLOUDCONVERT_API_KEY configurÃ©e dans Supabase
âœ… Edge Function convert-courrier-to-pdf dÃ©ployÃ©e
âœ… Test de conversion rÃ©ussi
âœ… PDF tÃ©lÃ©chargeable et valide


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CloudConvert :
  â€¢ Documentation API : https://cloudconvert.com/api/v2
  â€¢ Support : support@cloudconvert.com
  â€¢ Status : https://status.cloudconvert.com

Supabase :
  â€¢ Documentation : https://supabase.com/docs
  â€¢ Discord : https://discord.supabase.com


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FICHIERS DE DOCUMENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ GUIDE-CONVERSION-DOCX-PDF-CLOUDCONVERT.md
  â†’ Documentation technique complÃ¨te

â€¢ DEPLOIEMENT-RAPIDE-CONVERSION-PDF.md
  â†’ Guide de dÃ©ploiement en 5 minutes

â€¢ RESUME-CONVERSION-PDF-CLOUDCONVERT.md
  â†’ RÃ©sumÃ© concis de l'implÃ©mentation

â€¢ deploy-convert-pdf.sh
  â†’ Script de dÃ©ploiement automatique


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Date : 2025-12-24
Version : 1.0
