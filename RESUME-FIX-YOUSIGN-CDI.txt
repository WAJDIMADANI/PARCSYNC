========================================
FIX ERREUR YOUSIGN CDI - RÃ‰SUMÃ‰
========================================

PROBLÃˆME
--------
Erreur "Yousign error: DOCX download failed: 400 Bad Request"
Uniquement pour les contrats CDI avec le bouton "Renvoyer"

CAUSE
-----
Le fichier DOCX du modÃ¨le CDI n'est pas accessible
L'URL est mal formatÃ©e ou le fichier n'existe pas

CORRECTIONS APPLIQUÃ‰ES
----------------------
1. âœ… AmÃ©lioration construction des URLs DOCX
2. âœ… VÃ©rification accessibilitÃ© du fichier avant utilisation
3. âœ… Messages d'erreur plus clairs
4. âœ… Bouton "TÃ©lÃ©charger" amÃ©liorÃ© (retourne PDF directement)

DEUX BOUTONS DIFFÃ‰RENTS
------------------------
ðŸ”µ TÃ‰LÃ‰CHARGER (bleu)
   â†’ GÃ©nÃ¨re PDF via generate-contract-pdf
   â†’ Ne nÃ©cessite PAS de fichier DOCX
   â†’ Fonctionne toujours

ðŸŸ¢ RENVOYER (vert)
   â†’ Envoie contrat via Yousign pour signature
   â†’ NÃ‰CESSITE un fichier DOCX template
   â†’ Peut Ã©chouer si DOCX inaccessible

DÃ‰PLOIEMENT REQUIS
-------------------
./deploy-yousign-fix.sh

OU manuellement :
supabase functions deploy create-yousign-signature

VÃ‰RIFICATIONS Ã€ FAIRE
---------------------
1. Le fichier DOCX du modÃ¨le CDI existe dans Storage
2. Le bucket "documents" est PUBLIC
3. L'URL dans modeles_contrats.fichier_url est correcte

SQL DE VÃ‰RIFICATION
-------------------
SELECT id, nom, type_contrat, fichier_url
FROM modeles_contrats
WHERE type_contrat = 'CDI';

FICHIERS MODIFIÃ‰S
-----------------
1. src/components/EmployeeList.tsx
2. supabase/functions/create-yousign-signature/index.ts

DOCUMENTATION COMPLÃˆTE
----------------------
Voir FIX-ERREUR-YOUSIGN-CDI.md pour tous les dÃ©tails
